<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Bitcoin: src/Object/Network/NetworkCommunicator.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Bitcoin&#160;<span id="projectnumber">1.0</span></div>
   <div id="projectbrief">Bitcoin port</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('_network_communicator_8h.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">src/Object/Network/NetworkCommunicator.h File Reference</div>  </div>
</div>
<div class="contents">

<p>Used for communicating to other peers. The network communicator can send and receive bitcoin messages and uses function pointers for message handlers. The timeouts are in milliseconds. It is important to understant that a <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> does not guarentee thread safety for everything. Thread safety is only given to the "peers" list. This means it is completely okay to add and remove peers from multiple threads. Two threads may try to access the list at once such as if the <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> receives a socket timeout event and tries to remove an peer at the same time as a thread made by a program using cbitcoin tries to add a new peer. When using a <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a>, threading and networking dependencies need to be satisfied,.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="_peer_8h_source.html">Peer.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_address_manager_8h_source.html">AddressManager.h</a>&quot;</code><br/>
<code>#include &quot;../Message/Inventory.h&quot;</code><br/>
<code>#include &quot;../Message/GetBlocks.h&quot;</code><br/>
<code>#include &quot;../Message/Transaction.h&quot;</code><br/>
<code>#include &quot;../Message/BlockHeaders.h&quot;</code><br/>
<code>#include &quot;<a class="el" href="_ping_pong_message_8h_source.html">PingPongMessage.h</a>&quot;</code><br/>
<code>#include &quot;../Message/Alert.h&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for NetworkCommunicator.h:</div>
<div class="dyncontent">
<div class="center"><img src="_network_communicator_8h__incl.png" border="0" usemap="#src_2_object_2_network_2_network_communicator_8h" alt=""/></div>
<map name="src_2_object_2_network_2_network_communicator_8h" id="src_2_object_2_network_2_network_communicator_8h">
<area shape="rect" id="node3" href="_peer_8h.html" title="Contains data for managing peer connections. Inherits NetworkAddress." alt="" coords="245,160,304,189"/><area shape="rect" id="node26" href="_address_manager_8h.html" title="Stores addresses both unconnected and connected. It also proves serialisation and deserialisation so ..." alt="" coords="336,83,467,112"/><area shape="rect" id="node46" href="_ping_pong_message_8h.html" title="This message contains the nonce ID used in ping and pong messages for protocol versions over 60000..." alt="" coords="5,315,147,344"/><area shape="rect" id="node5" href="_network_address_8h.html" title="Contains IP, time, port and services information for a peer as well as data and code for managing ind..." alt="" coords="272,315,403,344"/><area shape="rect" id="node19" href="_version_8h.html" title="Contains infromation relating to the version of a peer, the timestamp, features, IPs, user agent and last block recieved. Inherits Message." alt="" coords="221,237,299,267"/><area shape="rect" id="node9" href="_network_functions_8h.html" title="NetworkFunctions.h" alt="" coords="449,392,588,421"/><area shape="rect" id="node33" href="_address_broadcast_8h.html" title="Message for broadcasting NetworkAddresses over the network. This is used to share socket information ..." alt="" coords="456,237,595,267"/></map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="_network_communicator_8h__dep__incl.png" border="0" usemap="#src_2_object_2_network_2_network_communicator_8hdep" alt=""/></div>
<map name="src_2_object_2_network_2_network_communicator_8hdep" id="src_2_object_2_network_2_network_communicator_8hdep">
<area shape="rect" id="node3" href="_network_communicator_8c.html" title="src/Object/Network/NetworkCommunicator.c" alt="" coords="5,83,288,112"/></map>
</div>
</div>
<p><a href="_network_communicator_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_network_communicator.html">NetworkCommunicator</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure for <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> objects.  <a href="struct_network_communicator.html#details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_network_communicator_8h.html#ade3656a19e30036812203499b4812f28">newNetworkCommunicator</a> (void(*<a class="el" href="_network_communicator_8c.html#a274a1668db621d346da002d3024d30b3">onErrorReceived</a>)(<a class="el" href="_constants_8h.html#a2c3e4bb40f36b262a5214e2da2bca9c5">Error</a> error, char *,...))</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> object.  <a href="#ade3656a19e30036812203499b4812f28"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_network_communicator_8h.html#a8f6b45a69dd016a1ce5bccb895ffb493">getNetworkCommunicator</a> (void *self)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> from another object. Use this to avoid casts.  <a href="#a8f6b45a69dd016a1ce5bccb895ffb493"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="_constants_8h.html#a7c6368b321bd9acd0149b030bb8275ed">boolean</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_network_communicator_8h.html#a65f780bc52416886df200daaab88d925">initNetworkCommunicator</a> (<a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *self, void(*<a class="el" href="_network_communicator_8c.html#a274a1668db621d346da002d3024d30b3">onErrorReceived</a>)(<a class="el" href="_constants_8h.html#a2c3e4bb40f36b262a5214e2da2bca9c5">Error</a> error, char *,...))</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialises a <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> object.  <a href="#a65f780bc52416886df200daaab88d925"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_network_communicator_8h.html#a3b2f7c2930c98d80faaea453dbd41e83">freeNetworkCommunicator</a> (void *self)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees a <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> object.  <a href="#a3b2f7c2930c98d80faaea453dbd41e83"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_network_communicator_8h.html#aded9961c1a68b927766a104314c54590">acceptNetworkCommunicatorConnection</a> (void *vself, uint64_t socket)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Accepts an incomming connection.  <a href="#aded9961c1a68b927766a104314c54590"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="_constants_8h.html#a7c6368b321bd9acd0149b030bb8275ed">boolean</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_network_communicator_8h.html#af6357467d50858e4e6d5932c8de97201">canNetworkCommunicatorConnect</a> (<a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *self, <a class="el" href="struct_network_address.html">NetworkAddress</a> *addr)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if it is beleived the network address can be connected to, otherwise false.  <a href="#af6357467d50858e4e6d5932c8de97201"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="_constants_8h.html#a54234ee76fe51e3623e3e2b2fb450032">ConnectionReturn</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_network_communicator_8h.html#a8f389aeb804ac988a65c1a5c95d6f758">connectNetworkCommunicator</a> (<a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *self, <a class="el" href="struct_peer.html">Peer</a> *peer)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Connects to a peer. This peer will be added to the peer list if it connects correctly.  <a href="#a8f389aeb804ac988a65c1a5c95d6f758"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_network_communicator_8h.html#a7225d7cf010c3bc7a449a0ab01219b18">didNetworkCommunicatorConnect</a> (void *vself, void *vpeer)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback for the connection to a peer.  <a href="#a7225d7cf010c3bc7a449a0ab01219b18"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_network_communicator_8h.html#acd4dc01c0c824abe004ff9411dc08c92">disconnectNetworkCommunicator</a> (<a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *self, <a class="el" href="struct_peer.html">Peer</a> *peer, uint16_t penalty, <a class="el" href="_constants_8h.html#a7c6368b321bd9acd0149b030bb8275ed">boolean</a> stopping)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Disconnects a peer.  <a href="#acd4dc01c0c824abe004ff9411dc08c92"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_version.html">Version</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_network_communicator_8h.html#a69dd66f0366f3bb333c8e3b4aa78fcee">getNetworkCommunicatorVersion</a> (<a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *self, <a class="el" href="struct_network_address.html">NetworkAddress</a> *addRecv)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a new version message for this.  <a href="#a69dd66f0366f3bb333c8e3b4aa78fcee"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="_constants_8h.html#ab81c995dde4e8570f99c0f5d64897c33">OnMessageReceivedAction</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_network_communicator_8h.html#a30582a94f937b7924e9bc72417974bee">autoDiscoveryNetworkCommunicatorProcessMessage</a> (<a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *self, <a class="el" href="struct_peer.html">Peer</a> *peer)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Processes a new received message for auto discovery.  <a href="#a30582a94f937b7924e9bc72417974bee"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="_constants_8h.html#ab81c995dde4e8570f99c0f5d64897c33">OnMessageReceivedAction</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_network_communicator_8h.html#a312055e1cc0c4e7042e66664d4d0b7a3">autoHandshakeNetworkCommunicatorProcessMessage</a> (<a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *self, <a class="el" href="struct_peer.html">Peer</a> *peer)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Processes a new received message for auto handshaking.  <a href="#a312055e1cc0c4e7042e66664d4d0b7a3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="_constants_8h.html#ab81c995dde4e8570f99c0f5d64897c33">OnMessageReceivedAction</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_network_communicator_8h.html#a240e0b91bc8fdd318c969ac311ccce0d">autoPingPongNetworkCommunicatorProcessMessage</a> (<a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *self, <a class="el" href="struct_peer.html">Peer</a> *peer)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Processes a new received message for auto ping pongs.  <a href="#a240e0b91bc8fdd318c969ac311ccce0d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_network_communicator_8h.html#a23b0b97e4bf8b96257a811485ce9d1d2">networkCommunicatorOnCanReceive</a> (void *vself, void *vpeer)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when a peer socket is ready for reading.  <a href="#a23b0b97e4bf8b96257a811485ce9d1d2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_network_communicator_8h.html#a958af2548aed14b08f1b64e9ef01a92c">networkCommunicatorOnCanSend</a> (void *vself, void *vpeer)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when a peer socket is ready for writing.  <a href="#a958af2548aed14b08f1b64e9ef01a92c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_network_communicator_8h.html#a222fe72f7db314834a2bcec1ac61bbd2">networkCommunicatorOnHeaderRecieved</a> (<a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *self, <a class="el" href="struct_peer.html">Peer</a> *peer)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when a header is received.  <a href="#a222fe72f7db314834a2bcec1ac61bbd2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_network_communicator_8h.html#a4c930c873e345ea856a6d03de0087520">networkCommunicatorOnLoopError</a> (void *vself)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Called on an error with the socket event loop. The error event is given with _ERROR_NETWORK_COMMUNICATOR_LOOP_FAIL.  <a href="#a4c930c873e345ea856a6d03de0087520"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_network_communicator_8h.html#a850f01f4a7a33973409167184cb13be0">networkCommunicatorOnMessageReceived</a> (<a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *self, <a class="el" href="struct_peer.html">Peer</a> *peer)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when an entire message is received.  <a href="#a850f01f4a7a33973409167184cb13be0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_network_communicator_8h.html#ada8d355e7836b20aea048336478f132d">networkCommunicatorOnTimeOut</a> (void *vself, void *vpeer, <a class="el" href="_constants_8h.html#aeeecc1ff73a8eb187422a4c379bf64f5">TimeOutType</a> type)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Called on a timeout error. The peer is removed.  <a href="#ada8d355e7836b20aea048336478f132d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="_constants_8h.html#a7c6368b321bd9acd0149b030bb8275ed">boolean</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_network_communicator_8h.html#a8b05260341ebda73fbe33e6c492f9331">networkCommunicatorSendMessage</a> (<a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *self, <a class="el" href="struct_peer.html">Peer</a> *peer, <a class="el" href="struct_message.html">Message</a> *message)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a message by placing it on the send queue. Will serialise standard messages (unless serialised already) but not alternative messages or alert messages.  <a href="#a8b05260341ebda73fbe33e6c492f9331"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_network_communicator_8h.html#a42f8a2488cd873d45ca5dddfa184a5f2">networkCommunicatorSendPings</a> (void *vself)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends pings to all connected peers.  <a href="#a42f8a2488cd873d45ca5dddfa184a5f2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_network_communicator_8h.html#a129b74bff9766bcc6186ac7693b2496e">networkCommunicatorSetAddressManager</a> (<a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *self, <a class="el" href="struct_address_manager.html">AddressManager</a> *addrMan)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the <a class="el" href="struct_address_manager.html" title="Structure for AddressManager objects.">AddressManager</a>.  <a href="#a129b74bff9766bcc6186ac7693b2496e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_network_communicator_8h.html#a75f2d9f01c0cbd6c23037cfbd9a78299">networkCommunicatorSetAlternativeMessages</a> (<a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *self, <a class="el" href="struct_byte_array.html">ByteArray</a> *altMessages, uint32_t *altMaxSizes)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the alternative messages.  <a href="#a75f2d9f01c0cbd6c23037cfbd9a78299"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_network_communicator_8h.html#ac006e1b9ad669e593e336ee120d1de1a">networkCommunicatorSetOurIPv4</a> (<a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *self, <a class="el" href="struct_network_address.html">NetworkAddress</a> *<a class="el" href="_network_communicator_8c.html#a7205498c8b149e4383a1abd02320d160">ourIPv4</a>)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the IPv4 address for the <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a>.  <a href="#ac006e1b9ad669e593e336ee120d1de1a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_network_communicator_8h.html#aa2c9c1dbe329207b0506a79d60ec9a70">networkCommunicatorSetOurIPv6</a> (<a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *self, <a class="el" href="struct_network_address.html">NetworkAddress</a> *<a class="el" href="_network_communicator_8c.html#aad277806aa44c401c56f35d707fb5b16">ourIPv6</a>)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the IPv6 address for the <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a>.  <a href="#aa2c9c1dbe329207b0506a79d60ec9a70"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_network_communicator_8h.html#a1c7113c4eaf174dab9c7e553a80e100d">networkCommunicatorSetUserAgent</a> (<a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *self, <a class="el" href="struct_byte_array.html">ByteArray</a> *userAgent)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the user agent.  <a href="#a1c7113c4eaf174dab9c7e553a80e100d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="_constants_8h.html#a7c6368b321bd9acd0149b030bb8275ed">boolean</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_network_communicator_8h.html#a5701fb0d9acbd6f1ed72729cfe1673de">networkCommunicatorStart</a> (<a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *self)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts a <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> by connecting to the peers in the peers list. This starts the socket event loop.  <a href="#a5701fb0d9acbd6f1ed72729cfe1673de"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_network_communicator_8h.html#aa0726014f5ec128c5684c00f3c1f79b2">networkCommunicatorStartListening</a> (<a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *self)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Causes the <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> to begin listening for incomming connections. "isListeningIPv4" and/or "isListeningIPv6" should be set to true if either IPv4 or IPv6 sockets are active.  <a href="#aa0726014f5ec128c5684c00f3c1f79b2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_network_communicator_8h.html#a3582cbe16e5f8039ef71ed2f8ec2857b">networkCommunicatorStartPings</a> (<a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *self)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts the timer event for sending pings (heartbeat).  <a href="#a3582cbe16e5f8039ef71ed2f8ec2857b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_network_communicator_8h.html#a41ae48cda40f96973d3aaffcdb7fc3f0">networkCommunicatorStop</a> (<a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *self)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes all connections. This may be neccessary in case of failure in which case NetworkCommunicatorStart can be tried again to reconnect to the listed peers.  <a href="#a41ae48cda40f96973d3aaffcdb7fc3f0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_network_communicator_8h.html#aab6f92b01ec3c352e6d73e5a7ba958ef">networkCommunicatorStopListening</a> (<a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *self)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops listening for both IPv6 connections and IPv4 connections.  <a href="#aab6f92b01ec3c352e6d73e5a7ba958ef"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_network_communicator_8h.html#a33a882bbadfa1027a7bccf2e084ec189">networkCommunicatorStopPings</a> (<a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *self)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops the timer event for sending pings (heartbeat).  <a href="#a33a882bbadfa1027a7bccf2e084ec189"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_network_communicator_8h.html#a7dac392d9c2711583f53db6a7ed7a476">networkCommunicatorTryConnections</a> (<a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *self)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Looks at the stored addresses and tries to connect to addresses up to the maximum number of allowed connections or as many as there are in the case the maximum number of connections is greater than the number of addresses, plus connected peers.  <a href="#a7dac392d9c2711583f53db6a7ed7a476"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Used for communicating to other peers. The network communicator can send and receive bitcoin messages and uses function pointers for message handlers. The timeouts are in milliseconds. It is important to understant that a <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> does not guarentee thread safety for everything. Thread safety is only given to the "peers" list. This means it is completely okay to add and remove peers from multiple threads. Two threads may try to access the list at once such as if the <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> receives a socket timeout event and tries to remove an peer at the same time as a thread made by a program using cbitcoin tries to add a new peer. When using a <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a>, threading and networking dependencies need to be satisfied,. </p>
<dl class="see"><dt><b>See also:</b></dt><dd>Dependencies.h Inherits <a class="el" href="struct_object.html" title="Base class.">Object</a> </dd></dl>

<p>Definition in file <a class="el" href="_network_communicator_8h_source.html">NetworkCommunicator.h</a>.</p>
</div><hr/><h2>Function Documentation</h2>
<a class="anchor" id="aded9961c1a68b927766a104314c54590"></a><!-- doxytag: member="NetworkCommunicator.h::acceptNetworkCommunicatorConnection" ref="aded9961c1a68b927766a104314c54590" args="(void *vself, uint64_t socket)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void acceptNetworkCommunicatorConnection </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>vself</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>socket</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Accepts an incomming connection. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">vself</td><td>The <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> object. </td></tr>
    <tr><td class="paramname">socket</td><td>The listening socket for accepting a connection. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_network_communicator_8c_source.html#l00073">73</a> of file <a class="el" href="_network_communicator_8c_source.html">NetworkCommunicator.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="_network_communicator_8h_aded9961c1a68b927766a104314c54590_cgraph.png" border="0" usemap="#_network_communicator_8h_aded9961c1a68b927766a104314c54590_cgraph" alt=""/></div>
<map name="_network_communicator_8h_aded9961c1a68b927766a104314c54590_cgraph" id="_network_communicator_8h_aded9961c1a68b927766a104314c54590_cgraph">
<area shape="rect" id="node3" href="_libev_sockets_8h.html#ad36ca96ed4c6c081ffbd348a5d4c4d07" title="canReceive" alt="" coords="404,59,495,88"/><area shape="rect" id="node5" href="_libev_sockets_8h.html#a808507af219de87eb1dac4c665868b52" title="canSend" alt="" coords="413,112,485,141"/><area shape="rect" id="node7" href="_peer_8c.html#a9a43832d7e175059540bea094dc86df1" title="Creates a new Peer object." alt="" coords="316,165,583,195"/><area shape="rect" id="node13" href="_object_8c.html#a0407d34294cdc667982ffa9bd6f18cc9" title="Decrease the number in the reference counter. (It keeps track of how many objects have been created)..." alt="" coords="1283,140,1461,169"/><area shape="rect" id="node27" href="_network_communicator_8h.html#a23b0b97e4bf8b96257a811485ce9d1d2" title="Called when a peer socket is ready for reading." alt="" coords="328,269,571,299"/><area shape="rect" id="node29" href="_network_communicator_8h.html#a958af2548aed14b08f1b64e9ef01a92c" title="Called when a peer socket is ready for writing." alt="" coords="337,323,561,352"/><area shape="rect" id="node31" href="_network_communicator_8h.html#a3582cbe16e5f8039ef71ed2f8ec2857b" title="Starts the timer event for sending pings (heartbeat)." alt="" coords="343,376,556,405"/><area shape="rect" id="node33" href="_network_communicator_8h.html#aab6f92b01ec3c352e6d73e5a7ba958ef" title="Stops listening for both IPv6 connections and IPv4 connections." alt="" coords="333,429,565,459"/><area shape="rect" id="node9" href="_peer_8c.html#a47cab37273e1c40695743998af5e7574" title="Frees a Peer object." alt="" coords="696,59,792,88"/><area shape="rect" id="node20" href="_peer_8c.html#a45431953fdb960aab3255ab41fabab17" title="Gets a Peer from another object. Use this to avoid casts." alt="" coords="709,112,779,141"/><area shape="rect" id="node22" href="_object_8c.html#a8460165be167be3b0816d84f498e3733" title="Casts the pointer to the Object; use this to avoid explicitly casting." alt="" coords="705,165,783,195"/><area shape="rect" id="node24" href="_peer_8c.html#a24bb93076b941f800e03287a1731db9a" title="Initializes a Peer object." alt="" coords="633,5,855,35"/><area shape="rect" id="node11" href="_network_address_8c.html#a7ecd17d1b6f31ee7f6f683c4560a869e" title="destroys a NetworkAddress object." alt="" coords="904,87,1067,116"/><area shape="rect" id="node15" href="_message_8c.html#ac2c2a78178aac5f9f228b51d01bf5fe3" title="destroy Message" alt="" coords="1116,87,1233,116"/><area shape="rect" id="node18" href="_object_8c.html#a9773962d80072e39e235802b57907208" title="destructor" alt="" coords="1321,87,1423,116"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a30582a94f937b7924e9bc72417974bee"></a><!-- doxytag: member="NetworkCommunicator.h::autoDiscoveryNetworkCommunicatorProcessMessage" ref="a30582a94f937b7924e9bc72417974bee" args="(NetworkCommunicator *self, Peer *peer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_constants_8h.html#ab81c995dde4e8570f99c0f5d64897c33">OnMessageReceivedAction</a> autoDiscoveryNetworkCommunicatorProcessMessage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_peer.html">Peer</a> *&#160;</td>
          <td class="paramname"><em>peer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Processes a new received message for auto discovery. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>The <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> object. </td></tr>
    <tr><td class="paramname">peer</td><td>The peer </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if peer should be disconnected, false otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="a312055e1cc0c4e7042e66664d4d0b7a3"></a><!-- doxytag: member="NetworkCommunicator.h::autoHandshakeNetworkCommunicatorProcessMessage" ref="a312055e1cc0c4e7042e66664d4d0b7a3" args="(NetworkCommunicator *self, Peer *peer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_constants_8h.html#ab81c995dde4e8570f99c0f5d64897c33">OnMessageReceivedAction</a> autoHandshakeNetworkCommunicatorProcessMessage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_peer.html">Peer</a> *&#160;</td>
          <td class="paramname"><em>peer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Processes a new received message for auto handshaking. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>The <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> object. </td></tr>
    <tr><td class="paramname">peer</td><td>The peer </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if peer should be disconnected, false otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="a240e0b91bc8fdd318c969ac311ccce0d"></a><!-- doxytag: member="NetworkCommunicator.h::autoPingPongNetworkCommunicatorProcessMessage" ref="a240e0b91bc8fdd318c969ac311ccce0d" args="(NetworkCommunicator *self, Peer *peer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_constants_8h.html#ab81c995dde4e8570f99c0f5d64897c33">OnMessageReceivedAction</a> autoPingPongNetworkCommunicatorProcessMessage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_peer.html">Peer</a> *&#160;</td>
          <td class="paramname"><em>peer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Processes a new received message for auto ping pongs. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>The <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> object. </td></tr>
    <tr><td class="paramname">peer</td><td>The peer </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if peer should be disconnected, false otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="af6357467d50858e4e6d5932c8de97201"></a><!-- doxytag: member="NetworkCommunicator.h::canNetworkCommunicatorConnect" ref="af6357467d50858e4e6d5932c8de97201" args="(NetworkCommunicator *self, NetworkAddress *addr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_constants_8h.html#a7c6368b321bd9acd0149b030bb8275ed">boolean</a> canNetworkCommunicatorConnect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_network_address.html">NetworkAddress</a> *&#160;</td>
          <td class="paramname"><em>addr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns true if it is beleived the network address can be connected to, otherwise false. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>The <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> object. </td></tr>
    <tr><td class="paramname">addr</td><td>The <a class="el" href="struct_network_address.html" title="Structure for NetworkAddress objects.">NetworkAddress</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if it is beleived the peer can be connected to, otherwise false. </dd></dl>

</div>
</div>
<a class="anchor" id="a8f389aeb804ac988a65c1a5c95d6f758"></a><!-- doxytag: member="NetworkCommunicator.h::connectNetworkCommunicator" ref="a8f389aeb804ac988a65c1a5c95d6f758" args="(NetworkCommunicator *self, Peer *peer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_constants_8h.html#a54234ee76fe51e3623e3e2b2fb450032">ConnectionReturn</a> connectNetworkCommunicator </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_peer.html">Peer</a> *&#160;</td>
          <td class="paramname"><em>peer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Connects to a peer. This peer will be added to the peer list if it connects correctly. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>The <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> object. </td></tr>
    <tr><td class="paramname">peer</td><td>The peer to connect to. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>_CONNECT_OK if successful. _CONNECT_NO_SUPPORT if the IP version is not supported. _CONNECT_BAD if the connection failed and the address will be penalised. _CONNECT_FAIL if the connection failed but the address will not be penalised. </dd></dl>

</div>
</div>
<a class="anchor" id="a7225d7cf010c3bc7a449a0ab01219b18"></a><!-- doxytag: member="NetworkCommunicator.h::didNetworkCommunicatorConnect" ref="a7225d7cf010c3bc7a449a0ab01219b18" args="(void *vself, void *vpeer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void didNetworkCommunicatorConnect </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>vself</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>vpeer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Callback for the connection to a peer. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">vself</td><td>The <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> object. </td></tr>
    <tr><td class="paramname">vpeer</td><td>The <a class="el" href="struct_peer.html" title="Structure for Peer objects.">Peer</a> that connected. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="acd4dc01c0c824abe004ff9411dc08c92"></a><!-- doxytag: member="NetworkCommunicator.h::disconnectNetworkCommunicator" ref="acd4dc01c0c824abe004ff9411dc08c92" args="(NetworkCommunicator *self, Peer *peer, uint16_t penalty, boolean stopping)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void disconnectNetworkCommunicator </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_peer.html">Peer</a> *&#160;</td>
          <td class="paramname"><em>peer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>penalty</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_constants_8h.html#a7c6368b321bd9acd0149b030bb8275ed">boolean</a>&#160;</td>
          <td class="paramname"><em>stopping</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Disconnects a peer. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>The <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> object. </td></tr>
    <tr><td class="paramname">peer</td><td>The peer. </td></tr>
    <tr><td class="paramname">penalty</td><td>Penalty to the score of the address. </td></tr>
    <tr><td class="paramname">stopping</td><td>If true, do not call "onNetworkError" because the <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> is stopping. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a3b2f7c2930c98d80faaea453dbd41e83"></a><!-- doxytag: member="NetworkCommunicator.h::freeNetworkCommunicator" ref="a3b2f7c2930c98d80faaea453dbd41e83" args="(void *self)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void freeNetworkCommunicator </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Frees a <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> object. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>The <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> object to free. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_network_communicator_8c_source.html#l00058">58</a> of file <a class="el" href="_network_communicator_8c_source.html">NetworkCommunicator.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="_network_communicator_8h_a3b2f7c2930c98d80faaea453dbd41e83_cgraph.png" border="0" usemap="#_network_communicator_8h_a3b2f7c2930c98d80faaea453dbd41e83_cgraph" alt=""/></div>
<map name="_network_communicator_8h_a3b2f7c2930c98d80faaea453dbd41e83_cgraph" id="_network_communicator_8h_a3b2f7c2930c98d80faaea453dbd41e83_cgraph">
<area shape="rect" id="node3" href="_object_8c.html#a0407d34294cdc667982ffa9bd6f18cc9" title="Decrease the number in the reference counter. (It keeps track of how many objects have been created)..." alt="" coords="233,5,412,35"/><area shape="rect" id="node5" href="_object_8c.html#a9773962d80072e39e235802b57907208" title="destructor" alt="" coords="272,59,373,88"/><area shape="rect" id="node7" href="_network_communicator_8h.html#a41ae48cda40f96973d3aaffcdb7fc3f0" title="Closes all connections. This may be neccessary in case of failure in which case NetworkCommunicatorSt..." alt="" coords="233,112,412,141"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8f6b45a69dd016a1ce5bccb895ffb493"></a><!-- doxytag: member="NetworkCommunicator.h::getNetworkCommunicator" ref="a8f6b45a69dd016a1ce5bccb895ffb493" args="(void *self)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_network_communicator.html">NetworkCommunicator</a>* getNetworkCommunicator </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Gets a <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> from another object. Use this to avoid casts. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>The object to obtain the <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> from. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> object. </dd></dl>

</div>
</div>
<a class="anchor" id="a69dd66f0366f3bb333c8e3b4aa78fcee"></a><!-- doxytag: member="NetworkCommunicator.h::getNetworkCommunicatorVersion" ref="a69dd66f0366f3bb333c8e3b4aa78fcee" args="(NetworkCommunicator *self, NetworkAddress *addRecv)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_version.html">Version</a>* getNetworkCommunicatorVersion </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_network_address.html">NetworkAddress</a> *&#160;</td>
          <td class="paramname"><em>addRecv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Gets a new version message for this. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>The <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> object. </td></tr>
    <tr><td class="paramname">addRecv</td><td>The <a class="el" href="struct_network_address.html" title="Structure for NetworkAddress objects.">NetworkAddress</a> of the receipient. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a65f780bc52416886df200daaab88d925"></a><!-- doxytag: member="NetworkCommunicator.h::initNetworkCommunicator" ref="a65f780bc52416886df200daaab88d925" args="(NetworkCommunicator *self, void(*onErrorReceived)(Error error, char *,...))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_constants_8h.html#a7c6368b321bd9acd0149b030bb8275ed">boolean</a> initNetworkCommunicator </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(<a class="el" href="_constants_8h.html#a2c3e4bb40f36b262a5214e2da2bca9c5">Error</a> error, char *,...)&#160;</td>
          <td class="paramname"><em>onErrorReceived</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialises a <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> object. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>The <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> object to initialise </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true on success, false on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="a23b0b97e4bf8b96257a811485ce9d1d2"></a><!-- doxytag: member="NetworkCommunicator.h::networkCommunicatorOnCanReceive" ref="a23b0b97e4bf8b96257a811485ce9d1d2" args="(void *vself, void *vpeer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void networkCommunicatorOnCanReceive </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>vself</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>vpeer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Called when a peer socket is ready for reading. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">vself</td><td>The <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> object. </td></tr>
    <tr><td class="paramname">vpeer</td><td>The <a class="el" href="struct_peer.html" title="Structure for Peer objects.">Peer</a> index with data to read. </td></tr>
  </table>
  </dd>
</dl>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="_network_communicator_8h_a23b0b97e4bf8b96257a811485ce9d1d2_icgraph.png" border="0" usemap="#_network_communicator_8h_a23b0b97e4bf8b96257a811485ce9d1d2_icgraph" alt=""/></div>
<map name="_network_communicator_8h_a23b0b97e4bf8b96257a811485ce9d1d2_icgraph" id="_network_communicator_8h_a23b0b97e4bf8b96257a811485ce9d1d2_icgraph">
<area shape="rect" id="node3" href="_network_communicator_8h.html#aded9961c1a68b927766a104314c54590" title="Accepts an incomming connection." alt="" coords="296,5,557,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a958af2548aed14b08f1b64e9ef01a92c"></a><!-- doxytag: member="NetworkCommunicator.h::networkCommunicatorOnCanSend" ref="a958af2548aed14b08f1b64e9ef01a92c" args="(void *vself, void *vpeer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void networkCommunicatorOnCanSend </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>vself</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>vpeer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Called when a peer socket is ready for writing. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">vself</td><td>The <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> object. </td></tr>
    <tr><td class="paramname">vpeer</td><td>The <a class="el" href="struct_peer.html" title="Structure for Peer objects.">Peer</a> </td></tr>
  </table>
  </dd>
</dl>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="_network_communicator_8h_a958af2548aed14b08f1b64e9ef01a92c_icgraph.png" border="0" usemap="#_network_communicator_8h_a958af2548aed14b08f1b64e9ef01a92c_icgraph" alt=""/></div>
<map name="_network_communicator_8h_a958af2548aed14b08f1b64e9ef01a92c_icgraph" id="_network_communicator_8h_a958af2548aed14b08f1b64e9ef01a92c_icgraph">
<area shape="rect" id="node3" href="_network_communicator_8h.html#aded9961c1a68b927766a104314c54590" title="Accepts an incomming connection." alt="" coords="277,5,539,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a222fe72f7db314834a2bcec1ac61bbd2"></a><!-- doxytag: member="NetworkCommunicator.h::networkCommunicatorOnHeaderRecieved" ref="a222fe72f7db314834a2bcec1ac61bbd2" args="(NetworkCommunicator *self, Peer *peer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void networkCommunicatorOnHeaderRecieved </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_peer.html">Peer</a> *&#160;</td>
          <td class="paramname"><em>peer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Called when a header is received. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>The <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> object. </td></tr>
    <tr><td class="paramname">peer</td><td>The <a class="el" href="struct_peer.html" title="Structure for Peer objects.">Peer</a>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a4c930c873e345ea856a6d03de0087520"></a><!-- doxytag: member="NetworkCommunicator.h::networkCommunicatorOnLoopError" ref="a4c930c873e345ea856a6d03de0087520" args="(void *vself)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void networkCommunicatorOnLoopError </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>vself</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Called on an error with the socket event loop. The error event is given with _ERROR_NETWORK_COMMUNICATOR_LOOP_FAIL. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">vself</td><td>The <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> object. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a850f01f4a7a33973409167184cb13be0"></a><!-- doxytag: member="NetworkCommunicator.h::networkCommunicatorOnMessageReceived" ref="a850f01f4a7a33973409167184cb13be0" args="(NetworkCommunicator *self, Peer *peer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void networkCommunicatorOnMessageReceived </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_peer.html">Peer</a> *&#160;</td>
          <td class="paramname"><em>peer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Called when an entire message is received. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>The <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> object. </td></tr>
    <tr><td class="paramname">peer</td><td>The <a class="el" href="struct_peer.html" title="Structure for Peer objects.">Peer</a>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ada8d355e7836b20aea048336478f132d"></a><!-- doxytag: member="NetworkCommunicator.h::networkCommunicatorOnTimeOut" ref="ada8d355e7836b20aea048336478f132d" args="(void *vself, void *vpeer, TimeOutType type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void networkCommunicatorOnTimeOut </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>vself</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>vpeer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_constants_8h.html#aeeecc1ff73a8eb187422a4c379bf64f5">TimeOutType</a>&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Called on a timeout error. The peer is removed. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">vself</td><td>The <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> object. </td></tr>
    <tr><td class="paramname">vpeer</td><td>The <a class="el" href="struct_peer.html" title="Structure for Peer objects.">Peer</a> index which timedout. </td></tr>
    <tr><td class="paramname">type</td><td>The type of the timeout </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a8b05260341ebda73fbe33e6c492f9331"></a><!-- doxytag: member="NetworkCommunicator.h::networkCommunicatorSendMessage" ref="a8b05260341ebda73fbe33e6c492f9331" args="(NetworkCommunicator *self, Peer *peer, Message *message)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_constants_8h.html#a7c6368b321bd9acd0149b030bb8275ed">boolean</a> networkCommunicatorSendMessage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_peer.html">Peer</a> *&#160;</td>
          <td class="paramname"><em>peer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_message.html">Message</a> *&#160;</td>
          <td class="paramname"><em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sends a message by placing it on the send queue. Will serialise standard messages (unless serialised already) but not alternative messages or alert messages. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>The <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> object. </td></tr>
    <tr><td class="paramname">peer</td><td>The <a class="el" href="struct_peer.html" title="Structure for Peer objects.">Peer</a>. </td></tr>
    <tr><td class="paramname">message</td><td>The <a class="el" href="struct_message.html" title="Structure for Message objects.">Message</a> to send. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if successful, false otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="a42f8a2488cd873d45ca5dddfa184a5f2"></a><!-- doxytag: member="NetworkCommunicator.h::networkCommunicatorSendPings" ref="a42f8a2488cd873d45ca5dddfa184a5f2" args="(void *vself)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void networkCommunicatorSendPings </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>vself</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sends pings to all connected peers. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>The <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> object. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a129b74bff9766bcc6186ac7693b2496e"></a><!-- doxytag: member="NetworkCommunicator.h::networkCommunicatorSetAddressManager" ref="a129b74bff9766bcc6186ac7693b2496e" args="(NetworkCommunicator *self, AddressManager *addrMan)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void networkCommunicatorSetAddressManager </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_address_manager.html">AddressManager</a> *&#160;</td>
          <td class="paramname"><em>addrMan</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the <a class="el" href="struct_address_manager.html" title="Structure for AddressManager objects.">AddressManager</a>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>The <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> object. </td></tr>
    <tr><td class="paramname">addr</td><td>The <a class="el" href="struct_address_manager.html" title="Structure for AddressManager objects.">AddressManager</a> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a75f2d9f01c0cbd6c23037cfbd9a78299"></a><!-- doxytag: member="NetworkCommunicator.h::networkCommunicatorSetAlternativeMessages" ref="a75f2d9f01c0cbd6c23037cfbd9a78299" args="(NetworkCommunicator *self, ByteArray *altMessages, uint32_t *altMaxSizes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void networkCommunicatorSetAlternativeMessages </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_byte_array.html">ByteArray</a> *&#160;</td>
          <td class="paramname"><em>altMessages</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>altMaxSizes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the alternative messages. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>The alternative messages as a <a class="el" href="struct_byte_array.html" title="Structure for ByteArray objects.">ByteArray</a> with 12 characters per message command, one after the other. </td></tr>
    <tr><td class="paramname">altMaxSizes</td><td>An allocated memory block of 32 bit integers with the max sizes for the alternative messages. </td></tr>
    <tr><td class="paramname">addr</td><td>The <a class="el" href="struct_address_manager.html" title="Structure for AddressManager objects.">AddressManager</a> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ac006e1b9ad669e593e336ee120d1de1a"></a><!-- doxytag: member="NetworkCommunicator.h::networkCommunicatorSetOurIPv4" ref="ac006e1b9ad669e593e336ee120d1de1a" args="(NetworkCommunicator *self, NetworkAddress *ourIPv4)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void networkCommunicatorSetOurIPv4 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_network_address.html">NetworkAddress</a> *&#160;</td>
          <td class="paramname"><em>ourIPv4</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the IPv4 address for the <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>The <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> object. </td></tr>
    <tr><td class="paramname">addr</td><td>The IPv4 address as a <a class="el" href="struct_network_address.html" title="Structure for NetworkAddress objects.">NetworkAddress</a>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aa2c9c1dbe329207b0506a79d60ec9a70"></a><!-- doxytag: member="NetworkCommunicator.h::networkCommunicatorSetOurIPv6" ref="aa2c9c1dbe329207b0506a79d60ec9a70" args="(NetworkCommunicator *self, NetworkAddress *ourIPv6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void networkCommunicatorSetOurIPv6 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_network_address.html">NetworkAddress</a> *&#160;</td>
          <td class="paramname"><em>ourIPv6</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the IPv6 address for the <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>The <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> object. </td></tr>
    <tr><td class="paramname">addr</td><td>The IPv6 address as a <a class="el" href="struct_network_address.html" title="Structure for NetworkAddress objects.">NetworkAddress</a>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a1c7113c4eaf174dab9c7e553a80e100d"></a><!-- doxytag: member="NetworkCommunicator.h::networkCommunicatorSetUserAgent" ref="a1c7113c4eaf174dab9c7e553a80e100d" args="(NetworkCommunicator *self, ByteArray *userAgent)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void networkCommunicatorSetUserAgent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_byte_array.html">ByteArray</a> *&#160;</td>
          <td class="paramname"><em>userAgent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the user agent. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>The <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> object. </td></tr>
    <tr><td class="paramname">addr</td><td>The user agent as a <a class="el" href="struct_byte_array.html" title="Structure for ByteArray objects.">ByteArray</a>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a5701fb0d9acbd6f1ed72729cfe1673de"></a><!-- doxytag: member="NetworkCommunicator.h::networkCommunicatorStart" ref="a5701fb0d9acbd6f1ed72729cfe1673de" args="(NetworkCommunicator *self)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_constants_8h.html#a7c6368b321bd9acd0149b030bb8275ed">boolean</a> networkCommunicatorStart </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Starts a <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> by connecting to the peers in the peers list. This starts the socket event loop. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>The <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> object. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if the <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> started successfully, false otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="aa0726014f5ec128c5684c00f3c1f79b2"></a><!-- doxytag: member="NetworkCommunicator.h::networkCommunicatorStartListening" ref="aa0726014f5ec128c5684c00f3c1f79b2" args="(NetworkCommunicator *self)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void networkCommunicatorStartListening </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Causes the <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> to begin listening for incomming connections. "isListeningIPv4" and/or "isListeningIPv6" should be set to true if either IPv4 or IPv6 sockets are active. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">vself</td><td>The <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> object. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a3582cbe16e5f8039ef71ed2f8ec2857b"></a><!-- doxytag: member="NetworkCommunicator.h::networkCommunicatorStartPings" ref="a3582cbe16e5f8039ef71ed2f8ec2857b" args="(NetworkCommunicator *self)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void networkCommunicatorStartPings </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Starts the timer event for sending pings (heartbeat). </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">vself</td><td>The <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> object. </td></tr>
  </table>
  </dd>
</dl>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="_network_communicator_8h_a3582cbe16e5f8039ef71ed2f8ec2857b_icgraph.png" border="0" usemap="#_network_communicator_8h_a3582cbe16e5f8039ef71ed2f8ec2857b_icgraph" alt=""/></div>
<map name="_network_communicator_8h_a3582cbe16e5f8039ef71ed2f8ec2857b_icgraph" id="_network_communicator_8h_a3582cbe16e5f8039ef71ed2f8ec2857b_icgraph">
<area shape="rect" id="node3" href="_network_communicator_8h.html#aded9961c1a68b927766a104314c54590" title="Accepts an incomming connection." alt="" coords="269,5,531,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a41ae48cda40f96973d3aaffcdb7fc3f0"></a><!-- doxytag: member="NetworkCommunicator.h::networkCommunicatorStop" ref="a41ae48cda40f96973d3aaffcdb7fc3f0" args="(NetworkCommunicator *self)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void networkCommunicatorStop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Closes all connections. This may be neccessary in case of failure in which case NetworkCommunicatorStart can be tried again to reconnect to the listed peers. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">vself</td><td>The <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> object. </td></tr>
  </table>
  </dd>
</dl>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="_network_communicator_8h_a41ae48cda40f96973d3aaffcdb7fc3f0_icgraph.png" border="0" usemap="#_network_communicator_8h_a41ae48cda40f96973d3aaffcdb7fc3f0_icgraph" alt=""/></div>
<map name="_network_communicator_8h_a41ae48cda40f96973d3aaffcdb7fc3f0_icgraph" id="_network_communicator_8h_a41ae48cda40f96973d3aaffcdb7fc3f0_icgraph">
<area shape="rect" id="node3" href="_network_communicator_8h.html#a3b2f7c2930c98d80faaea453dbd41e83" title="Frees a NetworkCommunicator object." alt="" coords="235,5,413,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aab6f92b01ec3c352e6d73e5a7ba958ef"></a><!-- doxytag: member="NetworkCommunicator.h::networkCommunicatorStopListening" ref="aab6f92b01ec3c352e6d73e5a7ba958ef" args="(NetworkCommunicator *self)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void networkCommunicatorStopListening </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Stops listening for both IPv6 connections and IPv4 connections. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">vself</td><td>The <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> object. </td></tr>
  </table>
  </dd>
</dl>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="_network_communicator_8h_aab6f92b01ec3c352e6d73e5a7ba958ef_icgraph.png" border="0" usemap="#_network_communicator_8h_aab6f92b01ec3c352e6d73e5a7ba958ef_icgraph" alt=""/></div>
<map name="_network_communicator_8h_aab6f92b01ec3c352e6d73e5a7ba958ef_icgraph" id="_network_communicator_8h_aab6f92b01ec3c352e6d73e5a7ba958ef_icgraph">
<area shape="rect" id="node3" href="_network_communicator_8h.html#aded9961c1a68b927766a104314c54590" title="Accepts an incomming connection." alt="" coords="285,5,547,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a33a882bbadfa1027a7bccf2e084ec189"></a><!-- doxytag: member="NetworkCommunicator.h::networkCommunicatorStopPings" ref="a33a882bbadfa1027a7bccf2e084ec189" args="(NetworkCommunicator *self)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void networkCommunicatorStopPings </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Stops the timer event for sending pings (heartbeat). </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">vself</td><td>The <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> object. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a7dac392d9c2711583f53db6a7ed7a476"></a><!-- doxytag: member="NetworkCommunicator.h::networkCommunicatorTryConnections" ref="a7dac392d9c2711583f53db6a7ed7a476" args="(NetworkCommunicator *self)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void networkCommunicatorTryConnections </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_network_communicator.html">NetworkCommunicator</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Looks at the stored addresses and tries to connect to addresses up to the maximum number of allowed connections or as many as there are in the case the maximum number of connections is greater than the number of addresses, plus connected peers. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>The <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> object. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ade3656a19e30036812203499b4812f28"></a><!-- doxytag: member="NetworkCommunicator.h::newNetworkCommunicator" ref="ade3656a19e30036812203499b4812f28" args="(void(*onErrorReceived)(Error error, char *,...))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_network_communicator.html">NetworkCommunicator</a>* newNetworkCommunicator </td>
          <td>(</td>
          <td class="paramtype">void(*)(<a class="el" href="_constants_8h.html#a2c3e4bb40f36b262a5214e2da2bca9c5">Error</a> error, char *,...)&#160;</td>
          <td class="paramname"><em>onErrorReceived</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creates a new <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> object. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>A new <a class="el" href="struct_network_communicator.html" title="Structure for NetworkCommunicator objects.">NetworkCommunicator</a> object. </dd></dl>

</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="_network_communicator_8h.html">NetworkCommunicator.h</a>      </li>
      <li class="footer">Generated on Wed Nov 14 2012 18:36:11 for Bitcoin by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


</body>
</html>
